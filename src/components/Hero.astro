---
// Hero.astro
// Mood Digital WOW: responsive, no right-side tiles, animated grid + checker + cinematic sheen
---

<section class="hero-w" id="top">
  <div class="bg" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>
  <div class="sheen" aria-hidden="true"></div>

  <div class="wrap">
    <div class="content">
      <div class="pill in">
        <span class="dot" aria-hidden="true"></span>
        <span class="pill-text">Programme intensif · Identite livree en 10 jours</span>
      </div>

      <h1 class="in d1">
        Identite Canva prete a vendre en <span class="accent">10 jours</span>.
      </h1>

      <p class="sub in d2">
        Coaching live, templates modulaires et rituels business pour entrepreneuses qui veulent aligner leur image, clarifier l'offre et lancer sans perte de temps.
      </p>

      <div class="cta in d3">
        <a class="btn primary magnetic" href="#demo" aria-label="Reserver un diagnostic">
          <span class="label">Reserver un diagnostic</span>
          <span class="arrow" aria-hidden="true">→</span>
          <span class="btn-shine" aria-hidden="true"></span>
        </a>

        <a class="btn ghost magnetic" href="#formation" aria-label="Voir la formation Canva">
          <span class="label">Voir la formation</span>
        </a>
      </div>

      <div class="hero-note in d3">
        <span class="pill-soft">Kit Mood Express offert</span>
        <a class="text-link" href="#kit">Telecharger le kit →</a>
      </div>

      <div class="proof in d4" role="list" aria-label="Elements de re assurance">
        <div class="proof-item" role="listitem">
          <span class="k">4.9/5</span>
          <span class="v">Satisfaction moyenne sur les 50 derniers lancements</span>
        </div>
        <div class="proof-item" role="listitem">
          <span class="k">10 jours</span>
          <span class="v">Pour livrer l'identite et la librairie Canva actionnable</span>
        </div>
        <div class="proof-item" role="listitem">
          <span class="k">Cadre</span>
          <span class="v">Coaching direct + checklists business et contenus</span>
        </div>
      </div>

      <div class="trustline in d4" aria-hidden="true">
        <span class="trust-badge">Coachs</span>
        <span class="trust-badge">Mentors business</span>
        <span class="trust-badge">Creatrices de contenu</span>
        <span class="trust-badge">Studios solo</span>
      </div>

      <a class="scroll" href="#pricing" aria-label="Descendre vers les offres">
        <span class="scroll-dot" aria-hidden="true"></span>
      </a>
    </div>
  </div>
</section>

<script is:inline>
  const root = document.documentElement;
  const hero = document.querySelector(".hero-w");

  const mFine = window.matchMedia && window.matchMedia("(pointer: fine)").matches;
  const mReduce = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  // Pointer parallax (desktop only)
  if (hero && mFine && !mReduce) {
    let raf = 0;
    const onMove = (e) => {
      cancelAnimationFrame(raf);
      raf = requestAnimationFrame(() => {
        const r = hero.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width;
        const y = (e.clientY - r.top) / r.height;
        root.style.setProperty("--mx", x.toFixed(3));
        root.style.setProperty("--my", y.toFixed(3));
      });
    };

    hero.addEventListener("pointermove", onMove);
    hero.addEventListener("pointerleave", () => {
      root.style.setProperty("--mx", "0.5");
      root.style.setProperty("--my", "0.35");
    });
  }

  // Auto drift (mobile / coarse pointer), only when hero is visible
  if (hero && (!mFine) && !mReduce) {
    let running = false;
    let t0 = performance.now();

    const tick = (t) => {
      if (!running) return;
      const dt = t - t0;
      const mx = 0.5 + Math.sin(dt * 0.00035) * 0.10;
      const my = 0.36 + Math.cos(dt * 0.00028) * 0.08;
      root.style.setProperty("--mx", mx.toFixed(3));
      root.style.setProperty("--my", my.toFixed(3));
      requestAnimationFrame(tick);
    };

    const io = new IntersectionObserver(
      (entries) => {
        const e = entries[0];
        running = !!e && e.isIntersecting;
        if (running) requestAnimationFrame(tick);
      },
      { threshold: 0.15 }
    );

    io.observe(hero);
  }

  // Magnetic buttons (fine pointer only to avoid mobile overflow)
  if (mFine && !mReduce) {
    const magnets = document.querySelectorAll(".magnetic");
    magnets.forEach((el) => {
      let raf = 0;

      const move = (e) => {
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          const r = el.getBoundingClientRect();
          const x = (e.clientX - r.left) / r.width - 0.5;
          const y = (e.clientY - r.top) / r.height - 0.5;
          el.style.transform = `translate3d(${x * 10}px, ${y * 8}px, 0)`;
        });
      };

      const leave = () => {
        el.style.transform = "translate3d(0,0,0)";
      };

      el.addEventListener("pointermove", move);
      el.addEventListener("pointerleave", leave);
    });
  }
</script>

<style>
  :root {
    --mx: 0.5;
    --my: 0.35;

    --bg0: #070607;
    --bg1: #0c0a08;

    --text: #f3f3f4;
    --muted: rgba(243, 243, 244, 0.74);

    --cream: #e3dbcf;
    --lilac: #bbadb5;
    --cocoa: #7e441e;
    --moss: #223026;
    --orange: #e6730a;

    --glass: rgba(255,255,255,0.06);
    --ease: cubic-bezier(0.16, 1, 0.3, 1);

    /* responsive textures */
    --grid: clamp(38px, 6vw, 58px);
    --checker: clamp(36px, 6vw, 52px);
  }

  *, *::before, *::after { box-sizing: border-box; }

  .hero-w {
    position: relative;
    overflow: hidden;
    min-height: 92vh;
    padding: clamp(5.8rem, 8vw, 7.25rem) 1.25rem clamp(5.2rem, 7vw, 6.25rem);
    display: grid;
    align-items: center;
    color: var(--text);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }

  .hero-w::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: -1px;
    height: clamp(90px, 18vw, 180px);
    background: linear-gradient(180deg, rgba(7,6,7,0) 0%, rgba(7,6,7,0.45) 45%, rgba(7,6,7,0.85) 78%, rgba(7,6,7,1) 100%);
    z-index: 0;
    pointer-events: none;
  }

  .wrap {
    width: min(1040px, 100%);
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }

  .content {
    text-align: center;
    max-width: 860px;
    margin: 0 auto;
    padding-inline: clamp(0px, 2vw, 18px);
  }

  /* Background layers */
  .bg {
    position: absolute;
    inset: -2px;
    z-index: -3;

    background:
      radial-gradient(1100px 780px at calc(var(--mx) * 100%) calc(var(--my) * 100%), rgba(230,115,10,0.16), transparent 60%),
      radial-gradient(900px 680px at calc((1 - var(--mx)) * 100%) 18%, rgba(34,48,38,0.26), transparent 62%),
      radial-gradient(820px 560px at 16% 18%, rgba(187,173,181,0.14), transparent 66%),
      radial-gradient(900px 600px at 86% 72%, rgba(126,68,30,0.16), transparent 62%),
      linear-gradient(180deg, var(--bg1), var(--bg0));

    mask-image: radial-gradient(120% 120% at 50% 10%, #000 70%, transparent 100%);
    -webkit-mask-image: radial-gradient(120% 120% at 50% 10%, #000 70%, transparent 100%);
  }

  .bg::before {
    content: "";
    position: absolute;
    inset: 0;

    background:
      repeating-linear-gradient(0deg, rgba(227,219,207,0.10) 0 1px, transparent 1px var(--grid)),
      repeating-linear-gradient(90deg, rgba(227,219,207,0.10) 0 1px, transparent 1px var(--grid));

    opacity: 0.55;
    transform: translate3d(0,0,0);
    animation: gridFloat 9s var(--ease) infinite alternate;
  }

  .bg::after {
    content: "";
    position: absolute;
    inset: 0;

    background:
      linear-gradient(45deg, rgba(0,0,0,0.84) 25%, transparent 25%) 0 0 / var(--checker) var(--checker),
      linear-gradient(-45deg, rgba(0,0,0,0.84) 25%, transparent 25%) 0 calc(var(--checker) / 2) / var(--checker) var(--checker),
      linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.84) 75%) calc(var(--checker) / 2) calc(var(--checker) * -0.5) / var(--checker) var(--checker),
      linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.84) 75%) calc(var(--checker) / 2) 0 / var(--checker) var(--checker);

    opacity: 0.13;
    mix-blend-mode: overlay;
    transform: translate3d(calc((var(--mx) - 0.5) * -22px), calc((var(--my) - 0.5) * -18px), 0);
    filter: blur(0.2px);
  }

  @keyframes gridFloat {
    0% { transform: translate3d(-18px, -12px, 0); opacity: 0.46; }
    100% { transform: translate3d(18px, 10px, 0); opacity: 0.62; }
  }

  .vignette {
    position: absolute;
    inset: 0;
    z-index: -2;
    pointer-events: none;
    background:
      radial-gradient(900px 600px at 50% 35%, transparent 45%, rgba(0,0,0,0.55) 100%),
      linear-gradient(to bottom, transparent 0%, transparent 70%, rgba(7,6,7,0.92) 90%, rgba(7,6,7,1) 100%);
  }

  .grain {
    position: absolute;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    opacity: 0.10;
    mix-blend-mode: overlay;
    background-image:
      repeating-radial-gradient(circle at 20% 30%, rgba(255,255,255,0.35) 0 1px, transparent 1px 7px),
      repeating-radial-gradient(circle at 80% 60%, rgba(0,0,0,0.45) 0 1px, transparent 1px 8px);
    filter: blur(0.2px);
  }

  .sheen {
    position: absolute;
    inset: -20% -30%;
    z-index: 0;
    pointer-events: none;
    background:
      conic-gradient(from 180deg at 50% 50%, transparent 0 330deg, rgba(227,219,207,0.10) 350deg, transparent 360deg);
    filter: blur(18px);
    opacity: 0.0;
    transform: translate3d(-10%, -10%, 0) rotate(0deg);
    animation: sheenIn 1.35s var(--ease) 0.15s forwards;
  }

  @keyframes sheenIn {
    0% { opacity: 0.0; transform: translate3d(-16%, -10%, 0) rotate(-10deg); }
    45% { opacity: 0.55; }
    100% { opacity: 0.0; transform: translate3d(18%, 12%, 0) rotate(20deg); }
  }

  /* Typo + UI */
  .pill {
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    padding: 0.55rem 1rem;
    border-radius: 999px;
    border: 1px solid var(--glass);
    background: rgba(255,255,255,0.03);
    backdrop-filter: blur(12px);
    box-shadow: 0 18px 65px rgba(0,0,0,0.35);
    margin-bottom: 1.55rem;
    transition: transform 0.35s var(--ease), border-color 0.35s var(--ease);
    max-width: 100%;
  }

  .pill:hover { transform: translateY(-2px); border-color: rgba(255,255,255,0.16); }

  .dot {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: var(--orange);
    box-shadow: 0 0 0 6px rgba(230,115,10,0.12);
    animation: pulse 2.4s ease-in-out infinite;
    flex: 0 0 auto;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(0.88); opacity: 0.62; }
  }

  .pill-text {
    font-size: 0.84rem;
    letter-spacing: 0.10em;
    text-transform: uppercase;
    color: rgba(227,219,207,0.92);
    line-height: 1.2;
    text-wrap: balance;
  }

  h1 {
    font-family: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    font-weight: 820;
    font-size: clamp(2.45rem, 5.6vw, 5.1rem);
    line-height: 1.02;
    letter-spacing: -0.045em;
    margin: 0 auto 1.15rem;
    max-width: 16ch;
    text-wrap: balance;
  }

  .accent {
    background: linear-gradient(135deg, var(--cream) 0%, rgba(230,115,10,0.96) 72%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .sub {
    margin: 0 auto 2.15rem;
    color: var(--muted);
    font-size: clamp(1.02rem, 2.05vw, 1.22rem);
    line-height: 1.68;
    max-width: 62ch;
  }

  .cta {
    display: flex;
    justify-content: center;
    gap: clamp(0.6rem, 2vw, 0.9rem);
    flex-wrap: wrap;
    align-items: center;
    margin-bottom: 1.65rem;
    width: 100%;
  }

  .hero-note {
    display: inline-flex;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.7rem;
    padding: 0.45rem 0.85rem;
    border-radius: 999px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.08);
    color: rgba(243,243,244,0.82);
    margin: 0 auto 1.2rem;
    box-shadow: 0 12px 42px rgba(0,0,0,0.35);
  }

  .pill-soft {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    padding: 0.42rem 0.78rem;
    border-radius: 999px;
    background: rgba(227,219,207,0.12);
    color: var(--text);
    border: 1px solid rgba(227,219,207,0.28);
    font-weight: 700;
    letter-spacing: 0.04em;
    text-transform: uppercase;
  }

  .text-link {
    color: #f3f3f4;
    text-decoration: none;
    position: relative;
    padding-bottom: 2px;
    font-weight: 620;
  }

  .text-link::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 1px;
    background: linear-gradient(90deg, rgba(227,219,207,0.0), rgba(227,219,207,0.85), rgba(230,115,10,0.95));
    transform-origin: left;
    transform: scaleX(0.6);
    transition: transform 0.28s var(--ease);
  }

  .text-link:hover::after { transform: scaleX(1); }

  .btn {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.65rem;
    padding: clamp(0.86rem, 2.6vw, 0.98rem) clamp(1.05rem, 4.2vw, 1.85rem);
    border-radius: 999px;
    text-decoration: none;
    font-weight: 680;
    border: 1px solid transparent;
    transition: transform 0.35s var(--ease), box-shadow 0.35s var(--ease), background 0.35s var(--ease), border-color 0.35s var(--ease);
    will-change: transform;
    transform: translate3d(0,0,0);

    max-width: 100%;
    min-width: 0;
    box-sizing: border-box;

    font-size: clamp(0.98rem, 2.2vw, 1.05rem);
    line-height: 1.15;
    text-align: center;
    flex-wrap: wrap;
  }

  .label {
    min-width: 0;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .primary {
    background: var(--cream);
    color: #0b0a08;
    border-color: rgba(227,219,207,0.78);
    box-shadow: 0 22px 75px rgba(0,0,0,0.45);
    overflow: hidden;
  }

  .ghost {
    background: rgba(255,255,255,0.035);
    color: var(--text);
    border-color: rgba(255,255,255,0.12);
    backdrop-filter: blur(10px);
  }

  .primary:hover { box-shadow: 0 32px 95px rgba(0,0,0,0.58); }

  .ghost:hover {
    border-color: rgba(255,255,255,0.22);
    background: rgba(255,255,255,0.06);
  }

  .arrow {
    display: inline-block;
    transition: transform 0.28s var(--ease);
    flex: 0 0 auto;
  }

  .primary:hover .arrow { transform: translateX(4px); }

  .btn-shine {
    position: absolute;
    inset: -2px;
    pointer-events: none;
    background:
      linear-gradient(115deg,
        transparent 0%,
        rgba(255,255,255,0.00) 38%,
        rgba(255,255,255,0.35) 50%,
        rgba(255,255,255,0.00) 62%,
        transparent 100%
      );
    transform: translateX(-120%);
    opacity: 0.7;
  }

  .primary:hover .btn-shine { animation: shine 0.9s var(--ease) forwards; }

  @keyframes shine { to { transform: translateX(120%); } }

  .btn:focus-visible,
  .text-link:focus-visible,
  .scroll:focus-visible {
    outline: 2px solid var(--cream);
    outline-offset: 2px;
    box-shadow: 0 0 0 6px rgba(227,219,207,0.14), 0 18px 55px rgba(0,0,0,0.45);
  }

  .proof {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 0.75rem;
    margin-top: 0.35rem;
  }

  .proof-item {
    padding: 0.95rem 1.05rem;
    border-radius: 18px;
    border: 1px solid var(--glass);
    background: rgba(255,255,255,0.03);
    backdrop-filter: blur(12px);
    transition: transform 0.35s var(--ease), border-color 0.35s var(--ease);
    min-width: 0;
  }

  .proof-item:hover { transform: translateY(-2px); border-color: rgba(255,255,255,0.16); }

  .k {
    display: block;
    font-size: 0.78rem;
    letter-spacing: 0.10em;
    text-transform: uppercase;
    color: rgba(227,219,207,0.82);
    margin-bottom: 0.25rem;
  }

  .v {
    display: block;
    font-size: 0.98rem;
    color: rgba(243,243,244,0.92);
    font-weight: 620;
  }

  .trustline {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
    margin: 1rem auto 0.6rem;
  }

  .trust-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.6rem 0.8rem;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(255,255,255,0.02);
    color: rgba(243,243,244,0.82);
    font-size: 0.92rem;
    letter-spacing: 0.02em;
    box-shadow: 0 12px 42px rgba(0,0,0,0.3);
  }

  .scroll {
    display: inline-flex;
    justify-content: center;
    align-items: flex-start;
    width: 34px;
    height: 54px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.02);
    margin: 2.2rem auto 0;
    backdrop-filter: blur(10px);
    box-shadow: 0 18px 55px rgba(0,0,0,0.35);
  }

  .scroll-dot {
    width: 6px;
    height: 6px;
    border-radius: 999px;
    background: rgba(227,219,207,0.92);
    margin-top: 12px;
    animation: scrollDot 1.35s var(--ease) infinite;
  }

  @keyframes scrollDot {
    0% { transform: translateY(0); opacity: 0.95; }
    70% { transform: translateY(18px); opacity: 0.20; }
    100% { transform: translateY(0); opacity: 0.95; }
  }

  /* Entrance */
  .in {
    opacity: 0;
    transform: translateY(26px) scale(0.985);
    filter: blur(10px);
    animation: reveal 1.12s var(--ease) forwards;
    will-change: opacity, transform, filter;
  }

  .d1 { animation-delay: 0.12s; }
  .d2 { animation-delay: 0.26s; }
  .d3 { animation-delay: 0.40s; }
  .d4 { animation-delay: 0.54s; }

  @keyframes reveal {
    to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
  }

  /* Tablet */
  @media (max-width: 900px) {
    .hero-w { min-height: auto; }
    .proof { grid-template-columns: 1fr; }
    .bg::before { animation-duration: 8.2s; }
  }

  /* Mobile */
  @media (max-width: 560px) {
    .cta { flex-direction: column; align-items: stretch; }
    .btn { width: 100%; }

    /* allow wrap instead of ellipsis on very small widths */
    .label { text-overflow: unset; overflow: visible; }

    .hero-note { width: 100%; justify-content: space-between; }
    .text-link { font-size: 0.95rem; }
  }

  /* very small phones */
  @media (max-width: 380px) {
    .btn { padding: 0.82rem 1.0rem; }
    .pill-text { font-size: 0.80rem; }
  }

  @media (prefers-reduced-motion: reduce) {
    .in { animation: none; opacity: 1; transform: none; filter: none; }
    .dot { animation: none; }
    .bg::before { animation: none; }
    .scroll-dot { animation: none; }
    .sheen { animation: none; opacity: 0; }
    .btn-shine { display: none; }
    .btn, .text-link, .hero-note, .trust-badge { transition: none; }
  }
</style>

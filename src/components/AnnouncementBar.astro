---
export interface Props {
text?: string;
href?: string;
dismissible?: boolean;
storageKey?: string;
}


const {
text = "Nouveau: -25% sur l'offre annuelle avec le code LEGEND25",
href = "#pricing",
dismissible = true,
storageKey = "announce:dismissed:v1",
} = Astro.props;
---


<div class="announce" data-announce data-storage-key={storageKey} role="region" aria-label="Annonce">
<div class="container announce__inner">
<div class="announce__text">
{href ? (
<a class="announce__link" href={href}>
<span class="announce__dot" aria-hidden="true"></span>
<span>{text}</span>
</a>
) : (
<>
<span class="announce__dot" aria-hidden="true"></span>
<span>{text}</span>
</>
)}
</div>


{dismissible && (
<button class="announce__close" type="button" aria-label="Fermer l'annonce" data-announce-close>
<span aria-hidden="true">Ã—</span>
</button>
)}
</div>
</div>


<style>
.announce {
position: sticky;
top: 0;
z-index: 80;
border-bottom: 1px solid var(--border);
background: rgba(11, 12, 16, 0.6);
backdrop-filter: blur(12px);
}
.announce__inner {
display: flex;
align-items: center;
justify-content: space-between;
gap: 0.75rem;
padding: 0.55rem 0;
}
.announce__text {
display: flex;
align-items: center;
gap: 0.55rem;
</script>